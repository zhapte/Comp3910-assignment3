<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html">
<h:head>
    <title>Timesheet REST API Directory</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
        }
        h1 { color: #333; }
        h2 { margin-top: 30px; }
        ul { line-height: 1.8; }
        code {
            background: #f0f0f0;
            padding: 2px 5px;
            border-radius: 4px;
        }
        .admin {
            color: #a00;
            font-weight: bold;
        }
        .tag {
            font-size: 0.85em;
            padding: 2px 6px;
            border-radius: 999px;
            background: #eee;
            margin-left: 6px;
        }
        .tag-admin {
            background: #ffe0e0;
            color: #a00;
        }
        .tag-self {
            background: #e0f2ff;
            color: #024;
        }
        .tag-public {
            background: #e0ffe7;
            color: #053;
        }
        .section-desc {
            margin-top: 4px;
            margin-bottom: 10px;
            color: #555;
        }
    </style>
</h:head>

<h:body>

    <h1>Timesheet REST API – Endpoint Overview</h1>
    <p>
        All endpoints are served under the base path:
        <code>/api</code>
        (e.g. <code>/api/login</code>, <code>/api/timesheets</code>).
    </p>

    <!-- Authentication -->
    <h2>Authentication</h2>
    <p class="section-desc">
        Log in to obtain a Bearer token, then include it in the <code>Authorization</code> header
        for all protected endpoints.
    </p>
    <ul>
        <li>
            <code>POST /api/login</code>
            <span class="tag tag-public">Public</span><br/>
            Request body:
            <code>{ "userName": "admin", "password": "password" }</code><br/>
            Returns token and basic user info.
        </li>
        <li>
            <code>POST /api/logout</code>
            <span class="tag">Authenticated</span><br/>
            Invalidates the current token (server-side).
        </li>
        <li>
            <code>GET /api/me</code>
            <span class="tag">Authenticated</span><br/>
            Returns the current authenticated user (resolved from the Bearer token).
        </li>
    </ul>

    <!-- Employees / Users -->
    <h2>Employees / Users</h2>
    <p class="section-desc">
        Endpoints under <code>/api/employees</code> manage users in the system.
        Some are admin-only as noted.
    </p>
    <ul>
        <li>
            <code>GET /api/employees</code>
            <span class="tag">Authenticated</span><br/>
            Returns a list of all employees.
        </li>
        <li>
            <code>GET /api/employees/{empNumber}</code>
            <span class="tag">Authenticated</span><br/>
            Look up an employee by numeric employee number.
        </li>
        <li>
            <code>GET /api/employees/by-username/{userName}</code>
            <span class="tag">Authenticated</span><br/>
            Look up an employee by username (case-insensitive).
        </li>
        <li>
            <code>POST /api/employees</code>
            <span class="tag tag-admin">Admin only</span><br/>
            Create a new employee (or admin), using JSON mapped to
            <code>Employee</code>.
        </li>
        <li>
            <code>POST /api/employees/{userName}/reset-password</code>
            <span class="tag tag-admin">Admin only</span><br/>
            Resets the specified user’s password back to the default
            (e.g. <code>"password"</code>).
        </li>
        <li>
            <code>PUT /api/employees/{userName}/password</code>
            <span class="tag tag-self">Self-service</span><br/>
            Change password for the specified user name.<br/>
            The server enforces that the caller can only change their own password
            (and/or admin, depending on your final rule).<br/>
            Typical body:
            <code>{ "password": "newPasswordHere" }</code>
            (or whatever shape you implemented).
        </li>
        <li>
            <code>DELETE /api/employees/{empNumber}</code>
            <span class="tag tag-admin">Admin only</span><br/>
            Deletes the specified employee by employee number (with safeguards).
        </li>
    </ul>

    <!-- Timesheets -->
    <h2>Timesheets</h2>
    <p class="section-desc">
        Endpoints under <code>/api/timesheets</code> expose timesheet data. Admins may see all,
        regular users generally see only their own.
    </p>
    <ul>
        <li>
            <code>GET /api/timesheets</code>
            <span class="tag">Authenticated</span><br/>
            Admin: returns all timesheets in the system.<br/>
            Regular user: returns only the caller’s timesheets.
        </li>
        <li>
            <code>GET /api/timesheets/{id}</code>
            <span class="tag">Authenticated</span><br/>
            Load a single timesheet by its ID.<br/>
            Allowed only if the caller is the owner or an admin;
            otherwise returns <code>403 Forbidden</code>.
        </li>
        <li>
            <code>POST /api/timesheets</code>
            <span class="tag">Authenticated</span><br/>
            Creates a new timesheet for the authenticated user for the current week
            (ending Friday). Returns the newly created timesheet (usually with
            status <code>201 Created</code>).
        </li>
        <li>
            <code>PUT /api/timesheets/{id}</code>
            <span class="tag">Authenticated</span><br/>
            Updates an existing timesheet.<br/>
            Only the owner or an admin may update it, and editing of past weeks is blocked
            (using the same rule as <code>TimesheetEditBean.isEditable()</code>).
        </li>
        <!-- If you eventually add a dedicated "current" endpoint, you can uncomment this:
        <li>
            <code>GET /api/timesheets/current</code>
            <span class="tag">Authenticated</span><br/>
            Returns the “current week” timesheet for the logged-in user.
        </li>
        -->
    </ul>

    <!-- Auth header note -->
    <h2>Authorization Header</h2>
    <p>
        All protected endpoints (those marked Authenticated or Admin) expect a header:
    </p>
    <p>
        <code>Authorization: Bearer &lt;token&gt;</code>
    </p>
    <p>
        The token value is obtained from the <code>/api/login</code> response.
    </p>

</h:body>
</html>
